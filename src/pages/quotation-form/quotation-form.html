<ion-header>
  <ion-navbar color="primary">
    <ion-toolbar>
      <ion-title>Request quotes</ion-title>
    </ion-toolbar>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <div class="container">

    <form [formGroup]="quotationForm">
      <div *ngIf="stepOne">
        <div class="form-group" *ngIf="!HomeOwnerQuotation.houseImage">
          <h6>Please upload the house plan</h6>
          <button ion-button block clear class="btn-upload" (click)="selectImage()">
            <ion-icon name="camera"> </ion-icon> image
          </button>
        </div>
        <div class="form-group" *ngIf="HomeOwnerQuotation.houseImage">
          <div class="interval">
            <img src="{{HomeOwnerQuotation.houseImage}}" class="image">
            <p>House plan successful</p>
            <button ion-fab mini (click)="remove()" color="light">
              <ion-icon name="close"></ion-icon>
            </button>
          </div>
        </div>
        <div class="form-group">
          <h6>When is the house going to be built and done?</h6>
          <div class="interval">
            <div class="child">
              <ion-item no-lines>
                <ion-label floating>Start Date</ion-label>
                <ion-datetime [(ngModel)]="HomeOwnerQuotation.startDate" formControlName="startDate" name="startDate"
                  [min]="maxDate" max="2022-01-01" displayFormat="MM/DD/YYYY"></ion-datetime>
              </ion-item>
              <div class="error" *ngFor="let validate of validation_messages.startDate">
                <div class="messages"
                  *ngIf="quotationForm.get('startDate').hasError(validate.type) && (quotationForm.get('startDate').dirty || quotationForm.get('startDate').touched)">
                  {{validate.message}}
                </div>
              </div>
            </div>
            <div class="child">
              <ion-item no-lines>
                <ion-label floating>End Date</ion-label>
                <ion-datetime [(ngModel)]="HomeOwnerQuotation.endDate" formControlName="endDate" [min]="maxDate"
                  max="2022-01-01" name="endDate" displayFormat="MM/DD/YYYY"></ion-datetime>
              </ion-item>
              <div class="error" *ngFor="let validate of validation_messages.endDate">
                <div class="messages"
                  *ngIf="quotationForm.get('endDate').hasError(validate.type) && (quotationForm.get('endDate').dirty || quotationForm.get('endDate').touched)">
                  {{validate.message}}
                </div>
              </div>

            </div>


          </div>
        </div>
      </div>

      <div *ngIf="stepTwo">
        <div class="form-group" style="background: rgb(250, 250, 250);">
          <h6>Please select the bricks you'd prefer</h6>
          <ion-list class="bricks" radio-group name="brickType" formControlName="brickType"
            [(ngModel)]="HomeOwnerQuotation.brickType">
            <div class="card" (tap)="highlight($event)" *ngFor="let brick of  bricks; let i=index;">
              <ion-radio class="radio" [value]="brick.name" name="brickType"></ion-radio>
              <p style="text-align: center;"><strong>{{brick.name}}</strong></p>
              <img (click)="viewProfile(brick)" src="{{brick.image}}" class="brickImage">
              <p>{{brick.description}}</p>
            </div>
          </ion-list>
          <div class="error" *ngFor="let validate of validation_messages.brickType">
            <div class="messages"
              *ngIf="quotationForm.get('brickType').hasError(validate.type) && (quotationForm.get('brickType').dirty || quotationForm.get('brickType').touched)">
              {{validate.message}}
            </div>
          </div>
        </div>
        <div class="form-group">
          <h6>Which wall type would you prefer</h6>
          <ion-list class="interval" radio-group name="brickType" formControlName="wallType"
            [(ngModel)]="HomeOwnerQuotation.wallType">
            <ion-item no-lines *ngFor="let wall of walls; let i=index;">
              <ion-label style="font-size: 17px; color: #333; ">{{wall.name}}</ion-label>
              <ion-radio [value]="wall.name"></ion-radio>
            </ion-item>
          </ion-list>
          <div class="error" *ngFor="let validate of validation_messages.wallType">
            <div class="messages"
              *ngIf="quotationForm.get('wallType').hasError(validate.type) && (quotationForm.get('wallType').dirty || quotationForm.get('wallType').touched)">
              {{validate.message}}
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="form-group">
          <h6>Do you want to include the following?</h6>
          <ion-item>
            <ion-label floating>Extras</ion-label>
            <ion-select multiple="true" cancelText="Cancel" okText="Ok" formControlName="extras"
              [(ngModel)]="HomeOwnerQuotation.extras">
              <ion-option *ngFor="let e of extras" value="{{e.service}}">{{e.service}}</ion-option>
            </ion-select>
          </ion-item>
          <div class="error" *ngFor="let validate of validation_messages.extras">
            <div class="messages"
              *ngIf="quotationForm.get('extras').hasError(validate.type) && (quotationForm.get('extras').dirty || quotationForm.get('extras').touched)">
              {{validate.message}}
            </div>
          </div>
        </div>
        <div class="form-group">
          <h6>Want to say something?</h6>
          <ion-list>
            <ion-item>
              <ion-label floating>Additional Comment</ion-label>
              <ion-textarea formControlName="comment" [(ngModel)]="HomeOwnerQuotation.comment" name="comment"
                class="comment"></ion-textarea>
            </ion-item>
          </ion-list>
          <div class="error" *ngFor="let validate of validation_messages.comment">
            <div class="messages"
              *ngIf="quotationForm.get('comment').hasError(validate.type) && (quotationForm.get('comment').dirty || quotationForm.get('comment').touched)">
              {{validate.message}}
            </div>
          </div>
          <ion-list radio-group (ionChange)="commentNow($event)">
            <ion-item *ngFor="let comment of comments; let i=index;">
              <ion-label style="font-size: 17px; color: #333; ">{{comment.comment}}</ion-label>
              <ion-radio [value]="comment.comment"></ion-radio>
            </ion-item>
          </ion-list>


        </div>
      </div>

    </form>
  </div>
</ion-content>
<ion-footer>
  <ion-toolbar>

    <ion-buttons>
      <button ion-button block (click)="createQuations(quotationForm)">
        <ion-icon name="send"></ion-icon>
      </button>
    </ion-buttons>

  </ion-toolbar>
</ion-footer>